# BRO 予約システム ユーザーフロー定義
（02_user_flow.md）

## 1. 本ドキュメントの目的

本ドキュメントは、BRO予約システムにおける  
**ユーザーの画面遷移・操作の流れを明確化** することを目的とする。

- 実装中の判断ブレを防ぐ
- UXの一貫性を保つ
- 将来の機能追加時の前提を共有する

---

## 2. 登場ユーザー

| 種別 | 説明 |
|---|---|
| お客様 | 予約を希望する利用者 |
| ボーイ | 予約を受けるスタッフ |
| 管理者 | システム管理者（MVPでは簡易） |

---

## 3. MVP版 ユーザーフロー概要

### 3.1 全体像

トップページ  
→ 予約トップ（スタッフ・日付・時間選択）  
→ 予約フォーム入力  
→ 予約完了（問い合わせ完了）  
→ ボーイ承認 / キャンセル  

---

## 4. お客様側フロー（MVP）

### 4.1 トップページ（/）

**目的**
- サービスの入口
- 各機能への導線

**操作**
- 「予約する」ボタンを押す

---

### 4.2 予約トップページ（/reserve）

**目的**
- 予約の前提条件を決める

**選択項目**
- スタッフ
- 日付
- 時間

**UI要件**
- 日付は横スクロール表示
- 時間はボタン選択
- 全項目選択後のみ「予約へ進む」ボタン有効

**遷移**
- `/reserve/form?staff=...&date=...&time=...`

---

### 4.3 予約フォーム（/reserve/form）

**目的**
- 予約問い合わせ内容の入力

**入力項目（MVP）**
- 名前（仮名可）
- 電話番号
- メールアドレス
- コース時間
- その他要望（任意）

**制約**
- 必須項目未入力時は送信不可
- この時点では「仮予約（問い合わせ）」扱い

**処理**
- Supabase に予約レコードを作成
- status = `pending`

**遷移**
- `/reserve/complete`

---

### 4.4 予約完了ページ（/reserve/complete）

**目的**
- 問い合わせ完了を明確に伝える

**表示内容**
- 問い合わせ送信完了メッセージ
- 予約は未確定である旨
- ボーイからの連絡待ち案内

---

## 5. ボーイ / 管理者側フロー（MVP）

### 5.1 予約一覧ページ（/dashboard/reservations）

**目的**
- 予約問い合わせの確認・対応

**表示形式**
- カードUI（スマホ）
- リストUI（PC）

**機能**
- 予約一覧表示
- 未承認のみフィルタ
- ステータス表示

---

### 5.2 承認処理

**操作**
- 「承認」ボタンを押す

**処理**
- status を `approved` に更新
- （将来）お客様へ通知

---

### 5.3 キャンセル処理

**操作**
- 「キャンセル」ボタンを押す
- 確認ダイアログ表示

**処理**
- status を `canceled` に更新

---

## 6. ステータス遷移

pending（未承認）  
→ approved（承認済み）  
→ canceled（キャンセル）  

---

## 7. 将来拡張を見据えた理想フロー（参考）

※ MVPでは未実装。設計判断用のメモ。

### 理想的な予約導線

HP（ボーイ詳細ページ）  
→ スケジュール確認  
→ コース選択（時間）  
→ 選択コースに応じた予約可能枠表示  
→ 予約フォーム  

**意図**
- コース時間に応じて空き枠を動的制御
- UXの矛盾を防ぐ

---

## 8. UX設計方針

- 「予約確定」と誤解させない表現
- 未承認状態を明確にする
- 選択不可理由が分かるUIを目指す
- 後からロジック差し替え可能な設計

---

## 9. 運用ルール

- フロー変更時は本ドキュメントを更新
- 未決事項は TODO として明記
- 実装と乖離が出た場合はここを正とする